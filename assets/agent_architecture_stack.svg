<?xml version="1.0" encoding="UTF-8"?>
<svg viewBox="0 0 1200 1000" xmlns="http://www.w3.org/2000/svg">
    <!-- Background -->
    <rect width="1200" height="1000" fill="#ffffff"/>
    
    <!-- Kubernetes Cluster Border -->
    <rect x="50" y="50" width="1100" height="900" rx="15" fill="#f8fafc" stroke="#64748b" stroke-width="2" stroke-dasharray="5,5"/>
    <text x="70" y="90" font-family="Arial" font-size="24" fill="#334155">Kubernetes Cluster</text>

    <!-- Core Agent Runtime -->
    <rect x="100" y="120" width="1000" height="300" rx="8" fill="#dbeafe" stroke="#2563eb"/>
    <text x="120" y="150" font-family="Arial" font-size="20" fill="#1e40af">Core Agent Runtime</text>

    <!-- Model Component -->
    <rect x="150" y="170" width="250" height="120" rx="8" fill="#ffffff" stroke="#2563eb"/>
    <text x="170" y="200" font-family="Arial" font-size="16">Model Service</text>
    <text x="170" y="230" font-family="Arial" font-size="14">- LLM Inference</text>
    <text x="170" y="250" font-family="Arial" font-size="14">- Embeddings</text>
    <text x="170" y="270" font-family="Arial" font-size="14">- Reasoning Engine</text>

    <!-- Orchestration Layer -->
    <rect x="450" y="170" width="250" height="230" rx="8" fill="#ffffff" stroke="#2563eb"/>
    <text x="470" y="200" font-family="Arial" font-size="16">Orchestration Layer</text>
    <rect x="470" y="220" width="210" height="25" rx="4" fill="#f1f5f9"/>
    <text x="480" y="237" font-family="Arial" font-size="12">Chain of Thought</text>
    <rect x="470" y="250" width="210" height="25" rx="4" fill="#f1f5f9"/>
    <text x="480" y="267" font-family="Arial" font-size="12">ReAct Planning</text>
    <rect x="470" y="280" width="210" height="25" rx="4" fill="#f1f5f9"/>
    <text x="480" y="297" font-family="Arial" font-size="12">Memory Management</text>
    <rect x="470" y="310" width="210" height="25" rx="4" fill="#f1f5f9"/>
    <text x="480" y="327" font-family="Arial" font-size="12">Tool Selection</text>
    <rect x="470" y="340" width="210" height="25" rx="4" fill="#f1f5f9"/>
    <text x="480" y="357" font-family="Arial" font-size="12">Error Recovery</text>

    <!-- Tools Component -->
    <rect x="750" y="170" width="300" height="230" rx="8" fill="#ffffff" stroke="#2563eb"/>
    <text x="770" y="200" font-family="Arial" font-size="16">Tools Layer</text>
    <rect x="770" y="220" width="260" height="60" rx="4" fill="#f1f5f9"/>
    <text x="780" y="245" font-family="Arial" font-size="14">Extensions</text>
    <text x="780" y="265" font-family="Arial" font-size="12">API Integration</text>
    
    <rect x="770" y="290" width="260" height="60" rx="4" fill="#f1f5f9"/>
    <text x="780" y="315" font-family="Arial" font-size="14">Functions</text>
    <text x="780" y="335" font-family="Arial" font-size="12">Client-side Execution</text>

    <!-- Infrastructure Layer -->
    <!-- Temporal -->
    <rect x="100" y="440" width="1000" height="160" rx="8" fill="#fef3c7" stroke="#d97706"/>
    <text x="500" y="470" font-family="Arial" font-size="20" fill="#92400e">Temporal Workflow Engine</text>
    
    <rect x="150" y="490" width="200" height="90" rx="4" fill="#ffffff" stroke="#d97706"/>
    <text x="170" y="520" font-family="Arial" font-size="14">Frontend Service</text>
    <text x="170" y="540" font-family="Arial" font-size="12">Task Management</text>
    
    <rect x="400" y="490" width="200" height="90" rx="4" fill="#ffffff" stroke="#d97706"/>
    <text x="420" y="520" font-family="Arial" font-size="14">History Service</text>
    <text x="420" y="540" font-family="Arial" font-size="12">Workflow State</text>
    
    <rect x="650" y="490" width="200" height="90" rx="4" fill="#ffffff" stroke="#d97706"/>
    <text x="670" y="520" font-family="Arial" font-size="14">Worker Service</text>
    <text x="670" y="540" font-family="Arial" font-size="12">Task Execution</text>

    <!-- Kong API Gateway -->
    <rect x="100" y="620" width="1000" height="100" rx="8" fill="#dbeafe" stroke="#2563eb"/>
    <text x="500" y="650" font-family="Arial" font-size="20" fill="#1e40af">Kong API Gateway</text>
    <text x="200" y="690" font-family="Arial" font-size="14">Rate Limiting</text>
    <text x="400" y="690" font-family="Arial" font-size="14">Auth/OAuth</text>
    <text x="600" y="690" font-family="Arial" font-size="14">Traffic Control</text>
    <text x="800" y="690" font-family="Arial" font-size="14">Analytics</text>

    <!-- Data Layer -->
    <rect x="100" y="740" width="1000" height="190" rx="8" fill="#f0fdf4" stroke="#16a34a"/>
    <text x="500" y="770" font-family="Arial" font-size="20" fill="#166534">Data Layer</text>
    
    <!-- Redpanda -->
    <rect x="150" y="790" width="300" height="120" rx="8" fill="#fee2e2" stroke="#dc2626"/>
    <text x="250" y="820" font-family="Arial" font-size="16" fill="#991b1b">Redpanda Events</text>
    <text x="170" y="850" font-family="Arial" font-size="12">Agent Events</text>
    <text x="170" y="870" font-family="Arial" font-size="12">Tool Events</text>
    <text x="170" y="890" font-family="Arial" font-size="12">State Events</text>

    <!-- Cassandra -->
    <rect x="500" y="790" width="250" height="120" rx="8" fill="#ffffff" stroke="#16a34a"/>
    <text x="570" y="820" font-family="Arial" font-size="16">Cassandra</text>
    <text x="520" y="850" font-family="Arial" font-size="12">State Store</text>
    <text x="520" y="870" font-family="Arial" font-size="12">Tool History</text>
    <text x="520" y="890" font-family="Arial" font-size="12">Analytics Store</text>

    <!-- Redis -->
    <rect x="800" y="790" width="250" height="120" rx="8" fill="#ffffff" stroke="#16a34a"/>
    <text x="890" y="820" font-family="Arial" font-size="16">Redis Cache</text>
    <text x="820" y="850" font-family="Arial" font-size="12">Session Cache</text>
    <text x="820" y="870" font-family="Arial" font-size="12">Tool Results Cache</text>
    <text x="820" y="890" font-family="Arial" font-size="12">Rate Limiting State</text>

    <!-- Connecting Lines -->
    <path d="M600,420 L600,440" stroke="#475569" stroke-width="2" marker-end="url(#arrowhead)"/>
    <path d="M600,600 L600,620" stroke="#475569" stroke-width="2" marker-end="url(#arrowhead)"/>
    <path d="M600,720 L600,740" stroke="#475569" stroke-width="2" marker-end="url(#arrowhead)"/>

    <!-- Arrow Marker -->
    <defs>
        <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
            <polygon points="0 0, 10 3.5, 0 7" fill="#475569"/>
        </marker>
    </defs>
</svg>